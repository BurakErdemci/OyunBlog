@page
@model MainPage.Pages.IndirimlerModel
@{
    ViewData["Title"] = "Oyun İndirimleri";
}
<section id="deals" style="margin-top:2rem;">
    <header>
        <h2>Steam İndirimleri</h2>
    </header>
    <div class="deal-list">
        @if (Model.SteamDeals != null && Model.SteamDeals.Any())
        {
            foreach (var deal in Model.SteamDeals)
            {
                <div class="deal-card" style="display:flex; flex-direction:row; align-items:flex-start; margin-bottom:2rem; box-shadow:0 2px 8px #ddd; border-radius:8px; overflow:hidden;">
                    <img src="@(string.IsNullOrEmpty(deal.LargeCapsuleImage) ? "https://via.placeholder.com/180x120?text=No+Image" : deal.LargeCapsuleImage)" alt="@deal.Name" style="width:180px; height:120px; object-fit:cover; flex-shrink:0;" />
                    <div style="padding:1.5rem; flex:1;">
                        <h5 style="font-size:1.2rem; font-weight:bold;">@deal.Name</h5>
                        <div style="margin:0.5rem 0;">
                            <span style="color:#888; text-decoration:line-through;">
                                @(deal.OriginalPrice > 0 ? "$" + (deal.OriginalPrice / 100.0).ToString("0.00") : "-")
                            </span>
                            <span style="color:#e53935; font-weight:bold; margin-left:1rem;">
                                @(deal.FinalPrice > 0 ? "$" + (deal.FinalPrice / 100.0).ToString("0.00") : "-")
                            </span>
                            <span style="color:#388e3c; font-weight:600; margin-left:1rem;">
                                -%@deal.DiscountPercent
                            </span>
                        </div>
                        <a href="https://store.steampowered.com/app/@deal.Id" target="_blank" class="deal-btn" style="background:#fff; color:#222; border:1.5px solid #222; padding:0.5rem 1.2rem; border-radius:4px; text-decoration:none; font-weight:600; transition:all 0.2s; display:inline-block; margin-top:1rem;">Steam'de Aç</a>
                    </div>
                </div>
            }
        }
        else
        {
            <div>İndirimli oyun bulunamadı.</div>
        }
    </div>
</section>

<section id="epic-deals" style="margin-top:3rem;">
    <header>
        <h2>Epic Games Ücretsiz Oyunlar</h2>
    </header>
    <div class="deal-list">
        @if (Model.EpicDeals != null && Model.EpicDeals.Any())
        {
            foreach (var deal in Model.EpicDeals)
            {
                <div class="deal-card" style="display:flex; flex-direction:row; align-items:flex-start; margin-bottom:2rem; box-shadow:0 2px 8px #ddd; border-radius:8px; overflow:hidden;">
                    <img src="@(string.IsNullOrEmpty(deal.LargeCapsuleImage) ? "https://via.placeholder.com/180x120?text=No+Image" : deal.LargeCapsuleImage)" alt="@deal.Name" style="width:180px; height:120px; object-fit:cover; flex-shrink:0;" />
                    <div style="padding:1.5rem; flex:1;">
                        <h5 style="font-size:1.2rem; font-weight:bold;">@deal.Name</h5>
                        <div style="margin:0.5rem 0;">
                            <span style="color:#888; text-decoration:line-through;">
                                @(deal.OriginalPrice > 0 ? "$" + (deal.OriginalPrice / 100.0).ToString("0.00") : "-")
                            </span>
                            <span style="color:#e53935; font-weight:bold; margin-left:1rem;">
                                @(deal.FinalPrice > 0 ? "$" + (deal.FinalPrice / 100.0).ToString("0.00") : "-")
                            </span>
                            <span style="color:#388e3c; font-weight:600; margin-left:1rem;">
                                -%@deal.DiscountPercent
                            </span>
                        </div>
                        <a href="@GetEpicUrl(deal)" target="_blank" class="deal-btn" style="background:#fff; color:#222; border:1.5px solid #222; padding:0.5rem 1.2rem; border-radius:4px; text-decoration:none; font-weight:600; transition:all 0.2s; display:inline-block; margin-top:1rem;">Epic Games'de Aç</a>
                    </div>
                </div>
            }
        }
        else
        {
            <div>Ücretsiz oyun bulunamadı.</div>
        }
    </div>
</section>

@functions {
    private string GetEpicUrl(Core.Concretes.DTOs.DealDto deal)
    {
        return deal.GameUrl ?? "https://store.epicgames.com/";
    }
}

<style>
.deal-btn:hover {
    background: #222 !important;
    color: #fff !important;
    border-color: #222 !important;
}
.deal-btn.epic:hover {
    background: #1565c0 !important;
    color: #fff !important;
}
</style> 